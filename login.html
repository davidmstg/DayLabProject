<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DayLab | Authentication</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="container">
        <nav>
            <a href="index.html" style="display: block; border: none; text-decoration: none;">
                <img src="logo1.png" alt="DayLab Logo" style="height: 50px; width: auto; mix-blend-mode: multiply; display: block;">
            </a>
            <ul id="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="bloodtest.html">Bloodtest</a></li>
                <li><a href="about.html">About Us</a></li>
                </ul>
        </nav>
    </header>

    <main class="container">
        <section class="text-center" style="padding-top: 100px; padding-bottom: 0; background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('pics/login.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; margin-bottom: 40px;">
            <h1 style="color: white; margin-bottom: 10px;">Welcome to DayLab</h1>
            <p style="color: white; margin-bottom: 30px;">Sign in to access your personalized health insights.</p>
            <div class="hero-line" style="background-color: white; opacity: 0.5; margin-bottom: 0; margin-left: auto; margin-right: auto;"></div>
        </section>

        <section style="max-width: 550px; margin: 0 auto; padding-bottom: 100px;">
            <div class="card medical-form">
                
                <div id="loginSection">
                    <div class="card-header">
                        <h3>Sign In</h3>
                    </div>
                    
                    <div class="form-group" style="margin-top: 20px;">
                        <label>Email Address</label>
                        <div class="input-wrapper">
                            <input type="email" id="email" placeholder="name@example.com">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Password</label>
                        <div class="input-wrapper">
                            <input type="password" id="password" placeholder="••••••••">
                        </div>
                    </div>

                    <div style="padding: 25px;">
                        <button onclick="showAssessment()" class="btn-main" style="width: 100%; margin: 0;">Sign In</button>
                    </div>
                </div>

                <div id="assessmentSection" class="hidden" style="display: none;">
                    <div class="card-header">
                        <h3>Tell Us More</h3>
                    </div>

                    <div style="padding: 20px 25px 10px; font-weight: bold; color: var(--accent-red); text-transform: uppercase; font-size: 0.8rem; letter-spacing: 1px;">
                        Your Profile
                    </div>

                    <div class="form-group">
                        <label>Gender</label>
                        <div class="input-wrapper">
                            <select id="gender" style="width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 6px;">
                                <option value="" disabled selected>Select gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Dietary Preferences</label>
                        <div class="input-wrapper">
                            <select id="diet" style="width: 100%; padding: 14px; border: 2px solid #e0e0e0; border-radius: 6px;">
                                <option value="standard">Standard / No restrictions</option>
                                <option value="vegan">Vegan</option>
                                <option value="dairy-free">Dairy-Free</option>
                                <option value="gluten-free">Gluten-Free</option>
                                <option value="pregnancy">Pregnancy-Friendly</option>
                                <option value="keto">Keto</option>
                                <option value="no-sugar">No Sugar</option>
                                <option value="vegetarian">Vegetarian</option>
                                <option value="intermittent-fasting">Intermittent Fasting</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Origin</label>
                        <div class="input-wrapper">
                            <input type="text" id="origin" placeholder="Where are you from?">
                        </div>
                    </div>

                    <div style="display: flex; gap: 20px; padding: 0 25px;">
                        <div class="form-group" style="flex: 1; padding: 0 0 20px 0;">
                            <label>Height (cm)</label>
                            <div class="input-wrapper"><input type="number" id="height" placeholder="175"></div>
                        </div>
                        <div class="form-group" style="flex: 1; padding: 0 0 20px 0;">
                            <label>Weight (kg)</label>
                            <div class="input-wrapper"><input type="number" id="weight" placeholder="70"></div>
                        </div>
                    </div>

                    <div style="padding: 25px;">
                        <button onclick="saveData()" class="btn-main" style="width: 100%; margin: 0;">Complete Profile</button>
                    </div>
                </div>

                <p class="form-footer">
                    <small>Your data is processed locally to ensure maximum privacy.</small>
                </p>
            </div>
        </section>
    </main>

    <footer class="text-center">
        <p>&copy; 2025 DayLab Project – All rights reserved.</p>
    </footer>

    <script>
        /**
         * Switch view from Login to Assessment form
         */
        function showAssessment() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('assessmentSection').style.display = 'block';
        }

        /**
     * Gathers user data, saves it to localStorage, and redirects to the Profile page
     */
    function saveData() {
        // 1. Collect all onboarding data from the form inputs
        const userData = {
            email: document.getElementById('email').value,
            gender: document.getElementById('gender').value,
            diet: document.getElementById('diet').value,
            origin: document.getElementById('origin').value,
            height: document.getElementById('height').value,
            weight: document.getElementById('weight').value,
            createdAt: new Date().toLocaleDateString() // Track when the profile was made
        };
        // Basic validation check to ensure email is provided
        if (!userData.email) {
            alert("Please enter your email address to continue.");
            return;
        }
        // Store the profile object in localStorage
        localStorage.setItem('daylabUserProfile', JSON.stringify(userData));
        // Initialize an empty blood test history array if it's a new user
        if (!localStorage.getItem('bloodTestHistory')) {
            localStorage.setItem('bloodTestHistory', JSON.stringify([]));
        }
        // Success feedback and redirection to the Personal Cabinet
        alert('Thank you, ' + userData.email + '! Your profile is now complete.');
        window.location.href = "profile.html"; 
    }
</script>
</body>
</html>